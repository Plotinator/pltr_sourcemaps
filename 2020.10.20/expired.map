{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"require(\\\"electron\\\")\"","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///external \"util\"","webpack:///./expired/AdView.js","webpack:///./expired/ExpiredView.js","webpack:///external \"assert\"","webpack:///external \"url\"","webpack:///external \"os\"","webpack:///external \"http\"","webpack:///./expired/index.js","webpack:///external \"events\"","webpack:///external \"https\""],"names":["i","chunkIds","length","deferredModules","j","deferredModule","enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","jsonpArray","webpackJsonpCallback","exports","require","AdView","Component","countdown","timesUp","val","this","state","ipcRenderer","send","setState","shell","openExternal","componentDidMount","interval","setInterval","decrementCountdown","componentWillUnmount","clearInterval","renderAd","className","onClick","handleAdClick","width","src","renderCountdown","r","cx","cy","render","i18n","ExpiredView","view","canExtend","storage","err","data","tryAgain","checkTrialInfo","extensions","componentWillMount","renderChoices","verify","style","padding","marginBottom","buy","height","fontSize","marginTop","Glyphicon","id","glyph","remote","app","setup","translations","locale","getLocale","document","title","config","path","resolve","__dirname","rollbar","accessToken","process","env","ROLLBAR_ACCESS_TOKEN","handleUncaughtExceptions","handleUnhandledRejections","payload","environment","version","getVersion","where","os","platform","on","log","error","root","getElementById"],"mappings":"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","file":"expired.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t5: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([848,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = require(\"electron\");","module.exports = require(\"path\");","module.exports = require(\"fs\");","module.exports = require(\"util\");","import React, { Component } from 'react'\nimport { ipcRenderer, shell } from 'electron'\nimport i18n from 'format-message'\n\nexport default class AdView extends Component {\n  state = {\n    countdown: 10, //if this changes, you have to change the animation length in expired_window.css.scss ~ line 79\n    timesUp: false\n  }\n  interval = null\n\n  componentDidMount () {\n    // start the countdown\n    this.interval = setInterval(this.decrementCountdown, 1000)\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.interval)\n  }\n\n  decrementCountdown = () => {\n    let val = this.state.countdown\n    let timesUp = --val === 0\n    if (timesUp) {\n      ipcRenderer.send('extend-trial', 5)\n    }\n    this.setState({countdown: val, timesUp})\n  }\n\n  handleAdClick = () => {\n    shell.openExternal('https://www.booksweeps.com/')\n  }\n\n  renderAd () {\n    return <div className='ad__wrapper' onClick={this.handleAdClick}>\n      <img width=\"40%\" src=\"https://www.booksweeps.com/wp-content/uploads/2019/10/BookSweeps-Logo-6-6.png\"/>\n      <p>THE SMART &amp; EASY WAY TO BUILD AN AUDIENCE FOR YOUR BOOKS</p>\n      <img width=\"40%\" src=\"https://www.booksweeps.com/wp-content/uploads/2019/10/BookSweeps-effect-Illustration-V5.png\"/>\n    </div>\n  }\n\n  renderCountdown () {\n    if (this.state.timesUp) return null\n\n    return <div className='ad__countdown'>\n      <div className=\"ad__countdown-number\">{this.state.countdown}</div>\n      <svg>\n        <circle r=\"18\" cx=\"20\" cy=\"20\"></circle>\n      </svg>\n    </div>\n  }\n\n  render () {\n    return <div>\n      { this.renderCountdown() }\n      <p>{i18n('You can have 5 more days to try Plottr')} 🎉</p>\n      <hr className='ad__hr'/>\n      { this.renderAd() }\n    </div>\n  }\n}","import React, { Component } from 'react'\nimport { ipcRenderer, ipcMain } from 'electron'\nimport i18n from 'format-message'\nimport { Glyphicon } from 'react-bootstrap'\nimport storage from 'electron-json-storage'\nimport AdView from 'AdView'\n\nexport default class ExpiredView extends Component {\n  state = {\n    view: 'checking',\n    canExtend: false\n  }\n  tryAgain = true\n\n  componentWillMount () {\n    this.checkTrialInfo()\n  }\n\n  checkTrialInfo = () => {\n    storage.get('trial_info', (err, data) => {\n      if (process.env.NODE_ENV === 'development') {\n        console.log(err)\n        console.log(data)\n      }\n      if (err) {\n        if (this.tryAgain) {\n          this.tryAgain = false\n          this.checkTrialInfo()\n        }\n      } else {\n        this.setState({view: 'choose', canExtend: data.extensions > 0})\n      }\n    })\n  }\n\n  buy = () => {\n    ipcRenderer.send('open-buy-window')\n  }\n\n  verify = () => {\n    ipcRenderer.send('verify-from-expired')\n  }\n\n  renderChoices () {\n    if (this.state.canExtend) {\n      return <div className='expired__chooser'>\n        <div className='expired__choice' onClick={this.verify}>\n          <h2>{i18n('I have a license key')}</h2>\n        </div>\n        <div className='expired__choice' onClick={() => this.setState({view: 'ad'})}>\n          <h2>{i18n('Can I have a few more days?')}</h2>\n        </div>\n      </div>\n    } else {\n      // return <div style={{margin: '35px', marginTop: '20px'}}>\n      //   <h3><a href='#' onClick={this.buy}>{i18n('Get the full version')}</a>{' '}<a href='#' onClick={this.verify}>{i18n('Or verify your license')}</a></h3>\n      //   <p></p>\n      //   <p style={{padding: '10px 70px'}}>{i18n('Don\\'t worry, all your work is saved in plottr_trial.pltr in your Documents folder')}</p>\n      // </div>\n      return <div>\n        <p style={{padding: '5px 70px'}}>{i18n('Don\\'t worry, all your work is saved in plottr_trial.pltr in your Documents folder')}</p>\n        <div className='expired__chooser' style={{marginBottom: '20px'}}>\n          <div className='expired__choice' onClick={this.buy}>\n            <h2>{i18n('I want to buy the full version!')}</h2>\n          </div>\n          <div className='expired__choice' onClick={this.verify}>\n            <h2>{i18n('I have a license key')}</h2>\n          </div>\n        </div>\n      </div>\n    }\n  }\n\n  render () {\n    if (this.state.view === 'choose') {\n      return <div>\n        <h1 className='expired'><img src='../icons/logo_28_100.png' className='verify' height='100'/> {i18n('Thanks for trying Plottr')}</h1>\n        <h2>{i18n('Your free trial has expired')} 😭</h2>\n        { this.renderChoices() }\n        <p>{i18n('Please contact me with any questions at support@getplottr.com')}</p>\n      </div>\n    } else if (this.state.view === 'ad') {\n      return <AdView />\n    } else {\n      return <span style={{ fontSize: '40px', marginTop: '100px' }}><Glyphicon id='spinner' glyph='refresh'/></span>\n    }\n  }\n}","module.exports = require(\"assert\");","module.exports = require(\"url\");","module.exports = require(\"os\");","module.exports = require(\"http\");","import path from 'path'\nimport log from 'electron-log'\nimport React from 'react'\nimport { render } from 'react-dom'\nimport ExpiredView from 'ExpiredView'\nconst { remote } = require('electron')\nconst app = remote.app\n\nimport i18n from 'format-message'\ni18n.setup({\n  translations: require('../../locales'),\n  locale: app.getLocale() || 'en'\n})\n\ndocument.title = i18n('Plottr')\n\nrequire('dotenv').config({path: path.resolve(__dirname, '..', '.env')})\nlet environment = process.env.NODE_ENV === 'development' ? 'development' : 'production'\nvar Rollbar = require('rollbar')\nlet rollbarToken = process.env.ROLLBAR_ACCESS_TOKEN || ''\nvar rollbar = new Rollbar({\n  accessToken: rollbarToken,\n  handleUncaughtExceptions: process.env.NODE_ENV !== 'development',\n  handleUnhandledRejections: true,\n  payload: {\n    environment: environment,\n    version: app.getVersion(),\n    where: 'expired.html',\n    os: process.platform\n  }\n})\n\nif (process.env.NODE_ENV !== 'development') {\n  process.on('uncaughtException', function (err) {\n    log.error(err)\n    rollbar.error(err)\n  })\n}\n\nconst root = document.getElementById('expired__react__root')\n\nrender(<ExpiredView />, root)","module.exports = require(\"events\");","module.exports = require(\"https\");"],"sourceRoot":""}